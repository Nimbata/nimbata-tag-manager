___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Nimbata Call Tracking",
  "brand": {
    "id": "Nimbata",
    "displayName": "Nimbata",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "Track calls from online as easily as clicks. Nimbata\u0027s tag allows you to quickly deploy dynamic call tracking to your site so that you know exactly which sources and pages are driving calls.",
  "categories": ["ADVERTISING", "AFFILIATE_MARKETING", "ANALYTICS", "ATTRIBUTION", "CONVERSIONS", "MARKETING"],
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "dniID",
    "displayName": "Dynamic number insertion ID",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      },
      {
        "type": "POSITIVE_NUMBER"
      },
      {
        "type": "REGEX",
        "args": [
          "^[0-9]{4,}$"
        ]
      }
    ],
    "help": "Find your ID in the Nimbata app under the Dynamic Number Insertion section."
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// declare constants for required APIs & for URL for injected script
const injectScript = require('injectScript');
const encodeUriComponent = require('encodeUriComponent');
const log = require('logToConsole');
const dniID = encodeUriComponent(data.dniID);
const url = 'https://cdn.dni.nimbata.com/' + dniID + '.min.js';

// log url to console while in preview & debug mode
log(url);

// call injectScript for url
injectScript(url, data.gtmOnSuccess, data.gtmOnFailure);


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://cdn.dni.nimbata.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 2/19/2020, 12:18:22 PM


